<!DOCTYPE html>
<html>
  <head>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script src="src/index.marko"></script>
    <script>

    class MyClass {
      onCreate() {
        this.state = {
          tasks: [],
        }

        this.loadTasks();
      }

      async loadTasks() {
        const { data } = await axios.get('http://localhost:8080/tasks');
        this.state.tasks = data;
      }

      async addTask() {
        await axios.post('http://localhost:8080/tasks', {
          title: '새로운 녀석'
        });
        await this.loadTasks();
      }

    }

    </script>
    <script src="src/index.js"></script>
  </head>
  <body>
    <h1>ToDo</h1>
    <ol>
      <for|task| of=state.tasks>
        <li>
          ${task.title}
        </li>
      </for>
    </ol>

    <p>
      <label for:scoped="title">
        할 일
      </label>
      <input id:scoped="title" type="text" />
      <button type="button" on-click("addTask")>
        추가
      </button>
    </p>

  </body>
</html>
